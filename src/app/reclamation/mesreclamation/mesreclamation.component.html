<main class="page-content container-fluid">
  <div class="ms-lg-3 mt-4">
    <div class="d-flex justify-content-end">
      <button (click)="sortByStatus()">Sort by Status</button>

      <button (click)="goToAdd()" type="button" class="btn btn-primary btn-black">Ajouter Reclamation</button>
    </div>
  </div>

  <div class="card mt-4">
    <div class="card-body">
      <table class="table table-striped">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Titre</th>
          <th scope="col">Description</th>
          <th scope="col">Date de Reclamation</th>
          <th scope="col">Status</th>
          <th scope="col">Image</th>
          <th scope="col">User</th>
          <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let i of ToShow; let idx = index">
          <td>{{ 'Reclamation ' + (idx + 1) }}</td>
          <td>{{ i.titre }}</td>
          <td>{{ i.description }}</td>
          <td>{{ i.dateDeReclamation }}</td>
          <td>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="statusCheckbox{{i.idReclamation}}" [(ngModel)]="i.status" (change)="updateStatus(i)">
              <label class="form-check-label" for="statusCheckbox{{i.idReclamation}}" [ngClass]="{'text-danger': !i.status, 'text-primary': i.status}">
                {{ i.status ? 'Treated' : 'Not Treated' }}
              </label>
            </div>
          </td>
          <td><img [src]="i.image" width="50px" height="50px"
          >
          </td>
          <td>{{i.user?.username}}</td>
          <td>
            <button (click)="delete(i.idReclamation)" class="btn btn-danger btn-sm me-1">Delete</button>
            <button (click)="modifier(i.idReclamation)" class="btn btn-secondary btn-sm">Modifier</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>

